@page "/brokers/fyers/optionchain"
@using NaniTrader.Localization
@inherits NaniTraderComponentBase
@inject AbpBlazorMessageLocalizerHelper<NaniTraderResource> LH
@inject IFyersSymbolAppService FyersSymbolAppService
@inject NavigationManager NavigationManager

<Card>
    <CardHeader>
        <Row>
            <Column ColumnSize="ColumnSize.Is3">
                <h2>@L["Option Chain"]</h2>
            </Column>
            <Column ColumnSize="ColumnSize.Is3">
                <Paragraph Alignment="TextAlignment.Right">
                    <Field>
                        <FieldLabel>@L["Underlying"]</FieldLabel>
                        <Select TValue="string" SelectedValue="@UnderlyingSelectedValue" SelectedValueChanged="@OnUnderlyingSelectedValueChangedAsync">
                            @foreach (string underlyingSymbol in UnderlyingSymbols)
                            {
                                <SelectItem TValue="string" Value="@underlyingSymbol">
                                    @underlyingSymbol
                                </SelectItem>
                            }
                        </Select>
                    </Field>
                </Paragraph>
            </Column>
            <Column ColumnSize="ColumnSize.Is3">
                <Paragraph Alignment="TextAlignment.Right">
                    <Field>
                        <FieldLabel>@L["ExpiryDateRange"]</FieldLabel>
                        <Select TValue="DateTime" SelectedValue="@ExpiryDateSelectedValue" SelectedValueChanged="@OnExpiryDateSelectedValueChangedAsync">
                            @foreach (var selectedUnderlyingExpiryDate in UnderlyingSymbolExpiryDates)
                            {
                                <SelectItem TValue="DateTime" Value="@selectedUnderlyingExpiryDate">
                                    @selectedUnderlyingExpiryDate
                                </SelectItem>
                            }
                        </Select>
                        <FieldLabel>@L["From"]</FieldLabel>
                        <Tooltip Text="Hello tooltip" Placement="TooltipPlacement.TopStart">
                            <Slider TValue="decimal" Value="25m" Step="5" Max="100m" />
                        </Tooltip>

                        <FieldLabel>@L["To"]</FieldLabel>
                        <Tooltip Text="Hello tooltip" Placement="TooltipPlacement.BottomEnd">
                            <Slider TValue="decimal" Value="55m" Step="5" Max="100m" />
                        </Tooltip>
                    </Field>
                </Paragraph>
            </Column>
            <Column ColumnSize="ColumnSize.Is3">
                <Paragraph Alignment="TextAlignment.Right">
                    <Field>
                        <FieldLabel>@L["Strike"]</FieldLabel>
                        <Select TValue="decimal" SelectedValue="@StrikeSelectedValue" SelectedValueChanged="@OnStrikeSelectedValueChangedAsync">
                            @foreach (var selectedUnderlyingStrike in UnderlyingSymbolStrikes)
                            {
                                <SelectItem TValue="decimal" Value="@selectedUnderlyingStrike">
                                    @selectedUnderlyingStrike
                                </SelectItem>
                            }
                        </Select>
                        <FieldLabel>@L["From"]</FieldLabel>
                        <Tooltip Text="Hello tooltip" Placement="TooltipPlacement.TopStart">
                            <Slider TValue="decimal" Value="25m" Step="5" Max="100m" />
                        </Tooltip>
                        
                        <FieldLabel>@L["To"]</FieldLabel>
                        <Tooltip Text="Hello tooltip" Placement="TooltipPlacement.BottomEnd">
                            <Slider TValue="decimal" Value="55m" Step="5" Max="100m" />
                        </Tooltip>
                    </Field>
                </Paragraph>
            </Column>
        </Row>
    </CardHeader>
    <CardBody>
        <DataGrid TItem="FyersSymbolStrikeDto"
                  Data="FyersSymbolStrikeList"
                  ReadData="OnDataGridReadAsync"
                  TotalItems="TotalCount"
                  ShowPager="true"
                  PageSize="PageSize">
            <DataGridColumns>
                <DataGridColumn TItem="FyersSymbolStrikeDto"
                                Field="@nameof(FyersSymbolStrikeDto.PEPrice)"
                                Caption="@L["PEPrice"]"></DataGridColumn>
                <DataGridColumn TItem="FyersSymbolStrikeDto"
                                Field="@nameof(FyersSymbolStrikeDto.PESymbol)"
                                Caption="@L["PESymbol"]"></DataGridColumn>
                <DataGridColumn TItem="FyersSymbolStrikeDto"
                                Field="@nameof(FyersSymbolStrikeDto.StrikePrice)"
                                Caption="@L["StrikePrice"]">
                </DataGridColumn>
                <DataGridColumn TItem="FyersSymbolStrikeDto"
                                Field="@nameof(FyersSymbolStrikeDto.CESymbol)"
                                Caption="@L["CESymbol"]"></DataGridColumn>
                <DataGridColumn TItem="FyersSymbolStrikeDto"
                                Field="@nameof(FyersSymbolStrikeDto.CEPrice)"
                                Caption="@L["CEPrice"]"></DataGridColumn>
            </DataGridColumns>
        </DataGrid>
    </CardBody>
</Card>